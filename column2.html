<body>
    <div id="posts-container-2">
        <h1>Piracicaba e Região</h1>
    </div>
    <script>
        // Função para fazer a requisição AJAX
        async function fazerRequisicao2() {
            const postsExclude2 = [36788, 36769, 36748, 36732, 36707]; //Deletar esta linha quando implementar no ambiente de testes...
            const excludedIds2 = postsExclude.join(',');

            const url2 = `https://policialpadrao.com.br/wp-json/wp/v2/posts?categories=436&exclude=${excludedIds2}&per_page=3&_embed`;

            try {
                const response2 = await fetch(url2);
                if (response2.ok) {
                    const posts2 = await response2.json();
                    renderizarPosts2(posts2);
                } else {
                    console.error('Erro na requisição:', response2.status);
                }
            } catch (error2) {
                console.error('Erro na requisição:', error2);
            }
        }

        // Renderiza os posts no HTML
        function renderizarPosts2(posts2) {
            const container2 = document.getElementById('posts-container-2');

            posts2.forEach((post2, index2) => {
                const postDiv2 = document.createElement('div');
                postDiv2.classList.add(`linha-${index2 + 1}`);

                // Obtém a imagem em destaque (se existir)
                const image2 = post2?._embedded?.['wp:featuredmedia']?.[0]?.source_url || '';

                // Obtém as categorias
                const categories2 = post2?._embedded?.['wp:term']?.[0]
                    .map((category2) => category2?.name)
                    .join(' ');

                // Cria elementos HTML para exibir a imagem, categorias e título
                const imageElement2 = document.createElement('img');
                imageElement2.src = image2;

                const categoriesElement2 = document.createElement('p');
                categoriesElement2.textContent = categories2 ? categories2 : '';

                const titleElement2 = document.createElement('h2');
                titleElement2.textContent = post2?.title?.rendered || '';

                // Cria links em torno da imagem e do título
                const imageLink2 = document.createElement('a');
                imageLink2.href = post2.link;
                imageLink2.target = '_blank';
                imageLink2.appendChild(imageElement2);

                const titleLink2 = document.createElement('a');
                titleLink2.href = post2.link;
                titleLink2.target = '_blank';
                titleLink2.appendChild(titleElement2);

                // Adiciona os elementos à div do post na ordem desejada
                postDiv2.appendChild(imageLink2);
                postDiv2.appendChild(categoriesElement2);
                postDiv2.appendChild(titleLink2);

                // Adiciona a div do post ao container no HTML
                container2.appendChild(postDiv2);
            });
            addAdvertisementColumn2();
        }

        // Renderiza o banner de anúncio da coluna 2
        function addAdvertisementColumn2() {
                const columnSelector2 = '#posts-container-2';
                const adContent2 = `
                <div style="max-width:300px; width:100%; height:100px;"><iframe src="https://policial.dmxdesign.com.br?_dnid=19540&t=1685549353" border="0" scrolling="no" allowtransparency="true" style="width:1px;min-width:100%;*width:100%;height:100%;border:0;"></iframe></div>
            `;
                $(columnSelector2).append(adContent2);

                criarBotao2();
            }

        // Cria o botão "mais notícias" na coluna 2
        function criarBotao2() {
            var botao = $('<button>', {
                text: 'mais notícias',
                class: 'botao-colunas-home',
                click: function () {
                    window.location.href = '/noticias-policiais/piracicaba-regiao/';
                }
            });

            $('#posts-container-2').append(botao);
        }

        // Chamada da função para fazer a requisição e renderizar os posts
        fazerRequisicao2();
    </script>
</body>